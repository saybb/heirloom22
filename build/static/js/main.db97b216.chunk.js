(window.webpackJsonpheirloom22_frontend=window.webpackJsonpheirloom22_frontend||[]).push([[0],{171:function(e,t,a){e.exports=a.p+"static/media/heirloom22_logo.e81dc3fb.svg"},278:function(e,t,a){},422:function(e,t,a){e.exports=a(738)},427:function(e,t,a){},432:function(e,t,a){},580:function(e,t,a){},675:function(e,t,a){},676:function(e,t,a){},677:function(e,t,a){},678:function(e,t,a){},690:function(e,t,a){},738:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),i=(a(427),a(23)),c=a(24),s=a(26),u=a(25),m=a(27),d=a(109),p=a(45),f=a(22),h=a(32),b=(a(432),a(433),a(291)),E=a(75),y=a(13),v=a(58);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var O=function(e){return function(t,a,n){var r=n.auth,l=n.firestore,o=r.currentUser,i=["name","lastName","location","bio","photoURL"];Object.keys(e).forEach((function(t){i.includes(t)&&e[t]&&""!==e[t]||delete e[t]})),l.collection("users").doc(o.uid).update(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(v.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)).then((function(){r.currentUser.updateProfile({displayName:e.name})})).catch((function(e){console.log("Set up user profile ERROR")})).then((function(){t({type:"PROFILE_UPDATE_SUCCESS"})})).catch((function(e){t({type:"PROFILE_UPDATE_ERROR"})}))}},j=a(171),w=a.n(j),k=a(41),C=a.n(k),S=a(55),_=a(760),R=a(111),I=a.n(R);a(442),a(443);I.a.initializeApp({apiKey:"AIzaSyD1XO5L2AYwpimMVN6pzl2OtFRJE2yE9Zc",authDomain:"testing-e1ec1.firebaseapp.com",databaseURL:"https://testing-e1ec1.firebaseio.com",projectId:"testing-e1ec1",storageBucket:"testing-e1ec1.appspot.com",messagingSenderId:"656238030591",appId:"1:656238030591:web:ee3f92b02ce48007"});var P=I.a.auth(),N=(I.a.auth,I.a.firestore()),A=(I.a.firestore,I.a.storage().ref()),D=I.a;function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(v.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F=function(e,t){return function(a,n,r){var l=r.auth;r.firestore.collection(e).add(L({},t,{authroId:l.currentUser.uid,created_by:l.currentUser.displayName,date_created:new Date,last_modified:new Date})).then((function(e){a({type:"CREATE_SUCCESS",doc:e})})).catch((function(e){console.log(e),a({type:"CREATE_ERROR"},e)}))}},x=function(e,t,a){return function(n,r,l){var o=l.firestore;Object.keys(a).forEach((function(e){a[e]&&0!==(a[e]||[]).length||delete a[e]})),o.collection(e).doc(t).update(L({},a,{last_modified:new Date})).then((function(){n({type:"EDIT_SUCCESS"})})).catch((function(e){console.log(e),n({type:"EDIT_ERROR"},e)}))}},M=function(e,t){return function(){var a=Object(S.a)(C.a.mark((function a(n,r,l){var o,i,c,s;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=l.firestore,i=o.collection(e).doc(t),a.next=4,i.get();case 4:c=a.sent,console.log(c.data()),(s=c.data()).artefacts_links&&s.artefacts_links.forEach((function(a){n(G(e,t,a.reference,"artefacts_links"))})),s.people_links&&s.people_links.forEach((function(a){n(G(e,t,a.reference,"people_links"))})),s.events_links&&s.events_links.forEach((function(a){n(G(e,t,a.reference,"events_links"))})),i.delete().then((function(){n({type:"DELETE_SUCCESS"})})).catch((function(e){console.log(e),n({type:"DELETE_ERROR"},e)}));case 11:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}()},T=function(e,t){return function(a,n,r){r.storageRef.child(e).put(t).then((function(e){e.ref.getDownloadURL().then((function(e){a({type:"UPLOAD_SUCCESS",downloadURL:e})})).catch((function(e){console.log(e),a({type:"UPLOAD_ERROR"})}))}))}},z=function(e,t,a,n){return function(r,l,o){o.firestore.collection(e).doc(t).update(Object(v.a)({},a,D.firestore.FieldValue.arrayUnion(n))).then((function(){r({type:"APPEND_SUCCESS"})})).catch((function(e){console.log(e),r({type:"APPEND_ERROR"},e)}))}},G=function(e,t,a,n){return function(){var r=Object(S.a)(C.a.mark((function r(l,o,i){var c,s,u,m,d,p;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=i.firestore,r.prev=1,r.next=4,c.doc(e+"/"+t);case 4:return s=r.sent,r.next=7,s.get();case 7:if(!(u=r.sent).data()){r.next=12;break}return m=B(u.data(),n,a),r.next=12,s.update(L({},m,{last_modified:new Date}));case 12:return r.next=14,a.get();case 14:if(!(d=r.sent).data()){r.next=19;break}return p=B(d.data(),"".concat(e.toLowerCase(),"_links"),s),r.next=19,a.update(L({},p,{last_modified:new Date}));case 19:r.next=24;break;case 21:r.prev=21,r.t0=r.catch(1),console.log(r.t0);case 24:case"end":return r.stop()}}),r,null,[[1,21]])})));return function(e,t,a){return r.apply(this,arguments)}}()};function B(e,t,a){if((e[t]||[]).length>0){var n=e[t].filter((function(e){return e.reference.id!==a.id}));e[t]=n}return e}var V=Object(f.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,a=e.profile;return t.uid?r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:a.photoURL?a.photoURL:"https://firebasestorage.googleapis.com/v0/b/testing-e1ec1.appspot.com/o/No%20profile%20photo.png?alt=media&token=23fa70a3-c8a7-409d-bd73-0d38ed8772d6",alt:"",style:{width:200,height:200,objectFit:"cover",maxWidth:"100%",borderRadius:"50%",verticalAlign:"middle"}}),r.a.createElement("p",null," ",t.email),r.a.createElement("p",null,a.name,"  ",a.lastName," "),r.a.createElement("p",null,a.email),r.a.createElement("p",null,a.location?a.location:"(Please add your location)"),r.a.createElement("p",null,a.bio?a.bio:"(Please edit your bio)")):r.a.createElement(d.a,{to:"/signin"})})),q=a(755),Y=a(759),W=a(761),H=a(752);function J(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}function K(e){var t="image/jpeg"===e.type||"image/png"===e.type;if(t){var a=e.size/1024/1024<5;if(a)return t&&a;W.a.error("Image must smaller than 5MB!")}else W.a.error("You can only upload JPG/PNG file!")}var X=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={previewVisible:!1,previewImage:"",fileList:[]},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preview){e.next=4;break}return e.next=3,J(t.originFileObj);case 3:t.preview=e.sent;case 4:a.setState({previewImage:t.preview,previewVisible:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.fileList;a.setState({fileList:t})},a.handleUpload=function(e){a.props.handleFile(e)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,l=r.a.createElement("div",null,r.a.createElement(y.a,{type:"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return r.a.createElement("div",{className:"clearfix"},r.a.createElement(H.a,{action:this.handleUpload,listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange,beforeUpload:K},n.length>=1?null:l),r.a.createElement(_.a,{visible:t,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),t}(r.a.Component),Z=Object(f.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.handleChange,a=e.handleFile;return r.a.createElement(n.Fragment,null,r.a.createElement(X,{handleFile:a}),r.a.createElement(q.a,null,r.a.createElement(q.a.Item,null,r.a.createElement(Y.a,{id:"name",placeholder:"first name",onChange:t})),r.a.createElement(q.a.Item,null,r.a.createElement(Y.a,{id:"lastName",placeholder:"last name",onChange:t})),r.a.createElement(q.a.Item,null,r.a.createElement(Y.a,{id:"location",placeholder:"where you are?",onChange:t})),r.a.createElement(q.a.Item,null,r.a.createElement(Y.a,{id:"bio",placeholder:"tell them about yourself",onChange:t}))))})),Q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={editMode:!1,visible:!1,confirmLoading:!1,name:"",lastName:"",location:"",bio:"",photoURL:null,file:null},a.showModal=function(){a.setState({visible:!0})},a.handleEditMode=function(){a.setState({editMode:!0})},a.handleSubmit=function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.file){e.next=10;break}return e.next=3,A.child("image/"+a.props.auth.uid+"/"+a.state.file.name).put(a.state.file);case 3:return n=e.sent,e.t0=a,e.next=7,n.ref.getDownloadURL();case 7:e.t1=e.sent,e.t2={photoURL:e.t1},e.t0.setState.call(e.t0,e.t2);case 10:a.props.updateUserProfile(a.state),a.setState({loading:!1,visible:!1,editMode:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleBack=function(){a.setState({visible:!1,editMode:!1})},a.handleCancel=function(){a.setState({editMode:!1})},a.handleChange=function(e){a.setState(Object(v.a)({},e.target.id,e.target.value))},a.handleFile=function(e){a.setState({file:e})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.visible,a=e.confirmLoading,n=this.props,l=n.profile,o=n.auth;return r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary",onClick:this.showModal,icon:"user"},o.displayName?o.displayName:l.name),r.a.createElement(_.a,{title:"Profile",visible:t,onOk:this.handleSubmit,confirmLoading:a,onCancel:this.handleBack,footer:this.state.editMode?[r.a.createElement(E.a,{key:"cancle",onClick:this.handleCancel},"Return"),r.a.createElement(E.a,{key:"submit",type:"primary",onClick:this.handleSubmit},"Submit")]:[r.a.createElement(E.a,{key:"close",onClick:this.handleBack},"Back"),r.a.createElement(E.a,{key:"edit",type:"primary",onClick:this.handleEditMode},"Edit Profile")]},this.state.editMode?r.a.createElement(Z,{handleChange:this.handleChange,handleFile:this.handleFile}):r.a.createElement(V,null)))}}]),t}(r.a.Component),$=Object(f.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile,url:e.objects.downloadURL}}),(function(e){return{updateUserProfile:function(t){return e(O(t))},uploadFile:function(t,a){return e(T(t,a))}}}))(Q),ee=(a(580),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).MainMenu=function(){return a.props.auth.uid?r.a.createElement(b.a,{className:"menu-main",mode:"horizontal"},r.a.createElement(b.a.Item,{key:"logo"},r.a.createElement(p.c,{to:"/"},r.a.createElement("img",{className:"nav-logo",src:w.a,alt:"logo"}))),r.a.createElement(b.a.Item,{key:"home"},r.a.createElement(p.c,{to:"/"},"Home")),r.a.createElement(b.a.Item,{key:"list"},r.a.createElement(p.c,{to:"/feed"},"List View")),r.a.createElement(b.a.Item,{key:"artefact"},r.a.createElement(p.c,{to:"/view/artefacts/family_crest_monument_id"},"Sample Artefact View")),r.a.createElement(b.a.Item,{key:"event"},r.a.createElement(p.c,{to:"/view/events/making_crest_id"},"Sample Event View")),r.a.createElement(b.a.Item,{key:"person"},r.a.createElement(p.c,{to:"/view/people/john_gilbert_id"},"Sample Person View"))):r.a.createElement(b.a,{className:"menu-main",mode:"horizontal"},r.a.createElement(b.a.Item,{key:"logo"},r.a.createElement(p.c,{to:"/"},r.a.createElement("img",{className:"nav-logo",src:w.a,alt:"logo"}))),r.a.createElement(b.a.Item,{key:"home"},r.a.createElement(p.c,{to:"/"},"Home")))},a.UserMenu=function(){var e=a.props,t=e.auth,n=e.signOut;return t.uid?r.a.createElement(b.a,{className:"menu-user",mode:"horizontal"},r.a.createElement(b.a.Item,{key:"profile"},r.a.createElement($,null)),r.a.createElement(b.a.Item,{key:"signup"},r.a.createElement(p.c,{to:"/signup"},"Sign up")),r.a.createElement(b.a.Item,{key:"logout"},r.a.createElement(E.a,{type:"link",onClick:n},r.a.createElement(y.a,{type:"logout",style:{color:"red"}})))):r.a.createElement(b.a,{className:"menu-user",mode:"horizontal"},r.a.createElement(b.a.Item,{key:"login"},r.a.createElement(p.c,{to:"/signin"},"Log in")))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"nav-bar"},r.a.createElement(this.MainMenu,null),r.a.createElement(this.UserMenu,null))}}]),t}(r.a.Component)),te=Object(f.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{signOut:function(){return e((function(e,t,a){a.auth.signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))(ee),ae=a(408),ne=a(51),re=a(747),le=a(756),oe=a(409),ie=a(754),ce=ie.a.Meta;var se=function(e){var t=e.artefact,a=e.reference;function n(e,t){return e.length>t?e.substring(0,t-2)+"...":e}return t?r.a.createElement("div",null,r.a.createElement(p.b,{to:"/view/artefacts/"+a},r.a.createElement(ie.a,{hoverable:!0,className:"artefact-list-element",cover:(t.media_links||[]).length>0?r.a.createElement("img",{alt:"cover",src:t.media_links[0].url}):null},r.a.createElement(ce,{title:n(t.name,50),description:t.description&&n(t.description,100)})))):r.a.createElement("p",null,"Nothing to show")},ue=(a(675),"Artefacts"),me="Events",de="People",pe="Addendums",fe=a(758),he=a(748),be=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t},Ee=Y.a.TextArea,ye=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!1,events_selected:[],people_selected:[],people_links:{},events_links:{},file:null,photoURL:null},a.toggle=function(){a.setState({loading:!0})},a.resetState=function(){a.setState({loading:!1,events_selected:[],people_selected:[],people_links:{},events_links:{},file:null,photoURL:null})},a.handleFile=function(e){a.setState({file:e})},a.handleSubmit=function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.props.form.validateFields(function(){var e=Object(S.a)(C.a.mark((function e(t,n){var r,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=16;break}if(a.toggle(),!a.state.file){e.next=12;break}return e.next=5,A.child("image/"+a.props.auth.uid+"/"+be(10)+a.state.file.name).put(a.state.file);case 5:return r=e.sent,e.t0=a,e.next=9,r.ref.getDownloadURL();case 9:e.t1=e.sent,e.t2={photoURL:e.t1},e.t0.setState.call(e.t0,e.t2);case 12:l={name:n.name,description:n.description||"",media_links:a.state.photoURL?[{date_created:new Date,url:a.state.photoURL}]:[]},a.props.handleSubmit(l),a.resetState(),a.props.form.resetFields();case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.RelationFormItems=function(){var e=a.props.form.getFieldDecorator,t=a.props,n=t.events,l=t.people,o=t.handleFieldChange,i=a.state,c=i.events_selected,s=i.people_selected,u=i.people_links,m=i.events_links;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Item,{label:"Related People"},e("people",{})(r.a.createElement(fe.a,{mode:"multiple",placeholder:"Select the People related to this Artefact.",optionFilterProp:"children",filterOption:!0,onChange:function(e){a.setState({people_selected:e}),o({people_selected:e});var t={};e.map((function(e){return t[e]=l[e].name})),o({people_names:t})}},l?Object.keys(l).map((function(e){return r.a.createElement(fe.a.Option,{key:e},l[e].name+" "+l[e].lastname)})):null))),r.a.createElement("div",null,s.map((function(t){return r.a.createElement(q.a.Item,{key:t,label:"Relation with "+l[t].name+" "+l[t].lastname},e(t,{initialValue:u[t]||"",setFieldsValue:u[t]||"",rules:[{required:!0,message:"Please describe how this person is related to your Artefact!"}]})(r.a.createElement(Ee,{placeholder:"Tell us how this person is related to your Artefact",autosize:{minRows:1},onChange:function(e){var a=u;a[t]=e.target.value,o({people_links:a})}})))}))),r.a.createElement(q.a.Item,{label:"Related Events"},e("events",{})(r.a.createElement(fe.a,{mode:"multiple",placeholder:"Select the Events related to this Artefact!",optionFilterProp:"children",filterOption:!0,onChange:function(e){a.setState({events_selected:e}),o({events_selected:e});var t={};e.map((function(e){return t[e]=n[e].name})),o({events_names:t})}},n?Object.keys(n).map((function(e){return r.a.createElement(fe.a.Option,{key:e},n[e].name)})):null))),r.a.createElement("div",null,c.map((function(t){return r.a.createElement(q.a.Item,{key:t,label:"Relation with "+n[t].name},e(t,{initialValue:m[t]||"",setFieldsValue:m[t]||"",rules:[{required:!0,message:"Please describe how this event is related to your Artefact!"}]})(r.a.createElement(Ee,{placeholder:"Tell us how this event is related to your Artefact",autosize:{minRows:1},onChange:function(e){var a=m;a[t]=e.target.value,o({events_links:a});var r=JSON.parse(JSON.stringify(m));r[t]=n[t].name,o({events_name:r})}})))}))))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.type,n=t.handleCancel,l=r.a.createElement(y.a,{type:"loading",style:{fontSize:24},spin:!0});return r.a.createElement(re.a,{spinning:this.state.loading,indicator:l,tip:"uploading",size:"large"},r.a.createElement(q.a,{onSubmit:this.handleSubmit,className:"CreateArtefactForm"},r.a.createElement(q.a.Item,{label:"Name"},e("name",{rules:[{required:!0,message:"Please give your Artefact a name!"}]})(r.a.createElement(Y.a,{placeholder:"Give your Artefact a name."}))),r.a.createElement(q.a.Item,{label:"Description"},e("description")(r.a.createElement(Ee,{placeholder:"Tell us about your artefact.\ne.g., why it is important, or about its history",autosize:{minRows:3}}))),"create"===a&&r.a.createElement(this.RelationFormItems,{form:e}),r.a.createElement(q.a.Item,{label:"Photo (JPG or PNG format only, file size must be less than 5M)"},r.a.createElement(X,{handleFile:this.handleFile}))),r.a.createElement(he.a,{type:"horizontal"}),r.a.createElement("div",{type:"flex",align:"right"},r.a.createElement(E.a,{type:"default",onClick:n},"Cancel"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(E.a,{type:"primary",ghost:!0,onClick:this.handleSubmit},"Submit")))}}]),t}(r.a.Component);ye=q.a.create({name:"createArtefactForm"})(ye);var ve=Object(h.d)(Object(f.b)((function(e){return{auth:e.firebase.auth,events:e.firestore.data.Events,people:e.firestore.data.People}})),Object(ne.firestoreConnect)((function(){return[{collection:de},{collection:me}]})))(ye),ge=a(751),Oe=Y.a.TextArea,je=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n={name:t.name,details:t.description||"",date:new Date(t.date)};a.props.handleSubmit(n),a.props.form.resetFields()}}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(q.a,{onSubmit:this.handleSubmit},r.a.createElement(q.a.Item,{label:"Name"},e("name",{rules:[{required:!0,message:"Please give your event a name!"}]})(r.a.createElement(Y.a,{placeholder:"Give your event a name."}))),r.a.createElement(q.a.Item,{label:"Date"},e("date",{rules:[{required:!0,message:"Please give your event a date!"}]})(r.a.createElement(ge.a,{placeholder:"dd/mm/yyyy",format:"DD/MM/YYYY"}))),r.a.createElement(q.a.Item,{label:"Description"},e("description")(r.a.createElement(Oe,{placeholder:"Tell us about this event.\ne.g., why it is important, or what happened at it.",autosize:{minRows:3}}))),r.a.createElement(q.a.Item,null,r.a.createElement(E.a,{type:"primary",ghost:!0,htmlType:"submit"},"Submit")))}}]),t}(r.a.Component),we=je=q.a.create({name:"eventForm"})(je),ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleSubmit=function(e){"create"===a.state.type?a.props.createObj(me,e):a.props.editObj(me,a.props.docId,e),a.setState({visible:!1})},a.state={visible:!1,type:a.props.type,title:"create"===a.props.type?"Create an Event":"Edit Event",docId:a.props.docId?a.props.docId:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{type:"primary",ghost:!0,onClick:this.showModal,style:{margin:"0 1rem"}},r.a.createElement(y.a,{type:"plus-square"}),this.state.title),r.a.createElement(_.a,{visible:this.state.visible,title:this.state.title,onOk:this.handleSubmit,onCancel:this.handleCancel,footer:[r.a.createElement(E.a,{key:"cancel",type:"default",onClick:this.handleCancel},"Cancel")]},r.a.createElement(we,{handleSubmit:this.handleSubmit})))}}]),t}(r.a.Component),Ce=Object(h.d)(Object(f.b)(null,(function(e){return{createObj:function(t,a){return e(F(t,a))},editObj:function(t,a,n){return e(x(t,a,n))}}})))(ke),Se=Y.a.TextArea,_e=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n={name:t.name,lastname:t.lastname,details:t.description||"",dob:new Date(t.date)};a.props.handleSubmit(n),a.props.form.resetFields()}}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(q.a,{onSubmit:this.handleSubmit},r.a.createElement(q.a.Item,{label:"First Name"},e("name",{rules:[{required:!0,message:"Please input this person's first name."}]})(r.a.createElement(Y.a,{placeholder:"What is this person's first name?"}))),r.a.createElement(q.a.Item,{label:"Last Name"},e("lastname",{rules:[{required:!0,message:"Please input this person's last name."}]})(r.a.createElement(Y.a,{placeholder:"What is this person's last name?"}))),r.a.createElement(q.a.Item,{label:"Date of Birth"},e("date",{rules:[{required:!0,message:"Please input this"}]})(r.a.createElement(ge.a,{placeholder:"dd/mm/yyyy",format:"DD/MM/YYYY"}))),r.a.createElement(q.a.Item,{label:"Description"},e("description")(r.a.createElement(Se,{placeholder:"Tell us about this person.\ne.g. what did they do, or how they are a part of the family.",autosize:{minRows:3}}))),r.a.createElement(q.a.Item,null,r.a.createElement(E.a,{type:"primary",ghost:!0,htmlType:"submit"},"Submit")))}}]),t}(r.a.Component),Re=_e=q.a.create({name:"personForm"})(_e),Ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleSubmit=function(e){"create"===a.state.type?a.props.createObj(de,e):a.props.editObj(de,a.props.docId,e),a.setState({visible:!1})},a.state={visible:!1,type:a.props.type,title:"create"===a.props.type?"Create a Person":"Edit Person",docId:a.props.docId?a.props.docId:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{type:"primary",ghost:!0,onClick:this.showModal,style:{margin:"0 1rem"}},r.a.createElement(y.a,{type:"plus-square"}),this.state.title),r.a.createElement(_.a,{visible:this.state.visible,title:"Create a new Person",onOk:this.handleSubmit,onCancel:this.handleCancel,footer:[r.a.createElement(E.a,{key:"cancel",type:"default",onClick:this.handleCancel},"Cancel")]},r.a.createElement(Re,{handleSubmit:this.handleSubmit})))}}]),t}(r.a.Component),Pe=Object(h.d)(Object(f.b)(null,(function(e){return{createObj:function(t,a){return e(F(t,a))},editObj:function(t,a,n){return e(x(t,a,n))}}})))(Ie);function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ne(a,!0).forEach((function(t){Object(v.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var De=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFieldChange=function(e){a.setState(e)},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleSubmit=function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r,l,o,i,c,s,u,m,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state,r=n.type,l=n.events_selected,o=n.people_selected,i=n.events_links,c=n.people_links,s=n.events_names,u=n.people_names,m=a.props.auth,"create"!==r){e.next=10;break}return e.next=5,N.collection(ue).add(Ae({},t,{authorId:m.uid,created_by:m.displayName,date_created:new Date,last_modified:new Date}));case 5:d=e.sent,l.length>0&&l.forEach((function(e){var n={name:t.name,reference:N.doc("/Artefacts/"+d.id),relation:i[e]},r={name:s[e],reference:N.doc("/Events/"+e),relation:i[e]};a.props.fieldAppend(me,e,"artefacts_links",n),a.props.fieldAppend(ue,d.id,"events_links",r)})),o.length>0&&o.forEach((function(e){var n={name:t.name,reference:N.doc("/Artefacts/"+d.id),relation:c[e]},r={name:u[e],reference:N.doc("/People/"+e),relation:c[e]};a.props.fieldAppend(de,e,"artefacts_links",n),a.props.fieldAppend(ue,d.id,"people_links",r)})),e.next=11;break;case 10:a.props.editObj(ue,a.props.docId,t);case 11:a.setState({visible:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={visible:!1,type:a.props.type,title:"create"===a.props.type?"Create an Artefact":"Edit Artefact",buttonText:"create"===a.props.type?"Create an Artefact":"Edit",docId:a.props.docId?a.props.docId:null,icon:"create"===a.props.type?"plus-square":"form",events_selected:[],people_selected:[],events_links:{},people_links:{},events_names:{},people_names:{}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{type:"primary",onClick:this.showModal,ghost:!0,size:"small"},r.a.createElement(y.a,{type:this.state.icon}),this.state.buttonText),r.a.createElement(_.a,{style:{top:20},visible:this.state.visible,title:this.state.title,onCancel:this.handleCancel,footer:null},"create"===this.state.type?r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe,{type:"create"}),r.a.createElement(Ce,{type:"create"})):null,r.a.createElement(ve,{handleSubmit:this.handleSubmit,handleFieldChange:this.handleFieldChange,type:this.state.type,docId:this.state.docId,handleCancel:this.handleCancel})))}}]),t}(r.a.Component),Ue=Object(h.d)(Object(f.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createObj:function(t,a){return e(F(t,a))},editObj:function(t,a,n){return e(x(t,a,n))},fieldAppend:function(t,a,n,r){return e(z(t,a,n,r))}}})))(De),Le=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.artefacts,a=e.profile;return t?t&&!Object.keys(t)?r.a.createElement("div",{className:"container center"},r.a.createElement("h2",null,"No artefact found.")):r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{onBack:function(){return window.history.back()},title:"Browsing your collection",tags:r.a.createElement(oe.a,{color:"blue"},a.name),extra:[r.a.createElement(Ue,{type:"create"})],avatar:{src:a.photoURL}}),r.a.createElement("div",{className:"artefact-list-wrapper"},r.a.createElement("div",{className:"artefact-list"},t&&Object.entries(t).map((function(e){var t=Object(ae.a)(e,2),a=t[0],n=t[1];return r.a.createElement(se,{key:a,reference:a,artefact:n})}))))):r.a.createElement("div",{className:"container center"},r.a.createElement(re.a,{tip:"Loading artefacts...",size:"large"}))}}]),t}(r.a.Component),Fe=Object(h.d)(Object(f.b)((function(e){return{artefacts:e.firestore.data.Artefacts,auth:e.firebase.auth,profile:e.firebase.profile}})),Object(ne.firestoreConnect)((function(){return[{collection:ue}]})))(Le);function xe(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Me=a(152),Te=a(84),ze=(a(676),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).style={textAlign:"center"},a.welcomeMessage=function(){var e,t=a.props,n=t.profile,l=t.auth;return e=xe(e=l&&l.displayName?l.displayName:n&&n.name?n.name:"Visiter"),l.uid?r.a.createElement("h2",null,"Hi ",e,". Here is an overview of how you can navigate through your family artefacts and find out more about your family history"):r.a.createElement("h2",{className:"Title"},"Hi ",e,". Please log in to start using this application.",r.a.createElement("p",{className:"Description"},"If you don't can't login you can try (1) reset the password (2) ask a family member to create a new account for you"))},a.tutorial=function(){return a.props.auth.uid?r.a.createElement("div",{className:"Tutorial"},r.a.createElement(Me.a,{type:"flex"},r.a.createElement(Te.a,{span:4},r.a.createElement(y.a,{type:"home"})),r.a.createElement(Te.a,{span:20},r.a.createElement(Me.a,{className:"title"},"Homepage"),r.a.createElement(Me.a,null,"Click on",r.a.createElement(E.a,{className:"LeftRightMargin"},r.a.createElement(p.c,{to:"/"},"Home")),"to come back to this page."))),r.a.createElement(Me.a,{type:"flex",justify:"center"},r.a.createElement(Te.a,{span:4},r.a.createElement(y.a,{type:"picture"})),r.a.createElement(Te.a,{span:20},r.a.createElement(Me.a,{className:"title"},"Gallery"),r.a.createElement(Me.a,null,"Click on",r.a.createElement(E.a,{className:"LeftRightMargin"},r.a.createElement(p.c,{to:"/feed"},"List View")),"to go to the Gallery where you can view all the artefacts and its related people and events."))),r.a.createElement(Me.a,{type:"flex",justify:"center"},r.a.createElement(Te.a,{span:4},r.a.createElement(y.a,{type:"logout"})),r.a.createElement(Te.a,{span:20},r.a.createElement(Me.a,{className:"title"},"Log out"),r.a.createElement(Me.a,null,"Click on",r.a.createElement(E.a,{type:"danger",onClick:a.props.signOut,className:"LeftRightMargin"},"Log out"),"to exit this application correctly."))),r.a.createElement(Me.a,{type:"flex",justify:"center"},r.a.createElement(Te.a,{span:4},r.a.createElement(y.a,{type:"user-add"})),r.a.createElement(Te.a,{span:20},r.a.createElement(Me.a,{className:"title"},"Create new accounts"),r.a.createElement(Me.a,null,"Click on",r.a.createElement(E.a,{className:"LeftRightMargin"},r.a.createElement(p.c,{to:"/signup"},"Sign up")),"create new accounts for your family members.")))):r.a.createElement("div",{className:"Tutorial"},r.a.createElement(Me.a,{type:"flex"},r.a.createElement(Te.a,{span:4},r.a.createElement(y.a,{type:"login"})),r.a.createElement(Te.a,{span:20},r.a.createElement(Me.a,{className:"title"},"Log in"),r.a.createElement(Me.a,null,"Click on",r.a.createElement(E.a,{className:"LeftRightMargin"},r.a.createElement(p.c,{to:"/signin"},"Log in")),"to start using this application."))))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.unMount()}},{key:"render",value:function(){return r.a.createElement("div",{className:"Welcome"},r.a.createElement("div",{className:"Background"},r.a.createElement("div",{className:"Intro"},r.a.createElement("img",{className:"logo",src:w.a,alt:"logo"}),r.a.createElement("h1",{className:"Center"},"Welcome to Heirloom22!"),this.welcomeMessage(),".",r.a.createElement("div",{className:"Hidden"},"."))),r.a.createElement(this.tutorial,null))}}]),t}(n.Component)),Ge=Object(f.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}),(function(e){return{signOut:function(){return e((function(e,t,a){a.auth.signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))(ze),Be=a(20),Ve=a.n(Be),qe=Y.a.TextArea,Ye=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,title:a.props.type,docId:a.props.docId?a.props.docId:null,events_selected:[],people_selected:[],events_links:{},people_links:{}},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleSubmit=function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r,l,o,i,c,s,u,m,d,p,f;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=a.props,r=n.firestore,l=n.events,o=n.people,i=n.artefact_id,c=n.fieldAppend,s=a.props.artefact[i],u=a.state,m=u.events_selected,d=u.people_selected,p=u.events_links,f=u.people_links,a.props.form.validateFields((function(e,t){e||(m.length>0&&m.forEach((function(e){var t={name:s.name,reference:r.doc("/Artefacts/"+i),relation:p[e]},a={name:l[e].name,reference:r.doc("/Events/"+e),relation:p[e]};c(me,e,"artefacts_links",t),c(ue,i,"events_links",a)})),d.length>0&&d.forEach((function(e){var t={name:s.name,reference:r.doc("/Artefacts/"+i),relation:f[e]},a={name:o[e].name,reference:r.doc("/People/"+e),relation:f[e]};c(de,e,"artefacts_links",t),c(ue,i,"people_links",a)})),a.props.form.resetFields(),a.setState({visible:!1}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.events,l=a.people,o=a.title,i=a.iconType,c=this.state,s=c.events_selected,u=c.people_selected,m=c.events_links,d=c.people_links,p=c.visible;return r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary",shape:"circle",icon:i,ghost:!0,onClick:this.showModal,size:"small"}),r.a.createElement(_.a,{visible:p,title:o,onCancel:this.handleCancel,footer:[r.a.createElement(E.a,{key:"back",onClick:this.handleCancel},"Return"),r.a.createElement(E.a,{key:"submit",type:"primary",onClick:this.handleSubmit},"Submit")]},r.a.createElement(q.a,{layout:"vertical",hideRequiredMark:!0},"Related People"===o?r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Item,{label:"Related People"},t("people",{})(r.a.createElement(fe.a,{mode:"multiple",placeholder:"Select the People related to this Artefact.",optionFilterProp:"children",filterOption:!0,onChange:function(t){e.setState({people_selected:t})}},l?Object.keys(l).map((function(e){return r.a.createElement(fe.a.Option,{key:e},l[e].name+" "+l[e].lastname)})):null))),r.a.createElement("div",null,u.map((function(a){return r.a.createElement(q.a.Item,{key:a,label:"Relation with "+l[a].name+" "+l[a].lastname},t(a,{initialValue:d[a]||"",setFieldsValue:d[a]||"",rules:[{required:!0,message:"Please describe how this person is related to your Artefact!"}]})(r.a.createElement(qe,{placeholder:"Tell us how this person is related to your Artefact",autosize:{minRows:1},onChange:function(t){var n=d;n[a]=t.target.value,e.setState({people_links:n})}})))})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Item,{label:"Related Events"},t("events",{})(r.a.createElement(fe.a,{mode:"multiple",placeholder:"Select the Events related to this Artefact!",optionFilterProp:"children",filterOption:!0,onChange:function(t){e.setState({events_selected:t})}},n?Object.keys(n).map((function(e){return r.a.createElement(fe.a.Option,{key:e},n[e].name)})):null))),r.a.createElement("div",null,s.map((function(a){return r.a.createElement(q.a.Item,{key:a,label:"Relation with "+n[a].name},t(a,{initialValue:m[a]||"",setFieldsValue:m[a]||"",rules:[{required:!0,message:"Please describe how this event is related to your Artefact!"}]})(r.a.createElement(qe,{placeholder:"Tell us how this event is related to your Artefact",autosize:{minRows:1},onChange:function(t){var n=m;n[a]=t.target.value,e.setState({events_links:n})}})))})))))))}}]),t}(r.a.Component);Ye=q.a.create({name:"createRelationForm"})(Ye);var We=Object(h.d)(Object(f.b)((function(e){return{auth:e.firebase.auth,events:e.firestore.data.Events,people:e.firestore.data.People}}),(function(e){return{fieldAppend:function(t,a,n,r){return e(z(t,a,n,r))}}})),Object(ne.firestoreConnect)((function(){return[{collection:de},{collection:me}]})))(Ye),He=a(749),Je=Object(h.d)(Object(f.b)(null,(function(e){return{deleteRelation:function(t,a,n,r){return e(G(t,a,n,r))}}})))((function(e){var t=e.item,a=e.objType,n=e.docId,l=e.fieldName;return r.a.createElement(He.a,{title:"Are you sure you want to remove this relation\uff1f",icon:r.a.createElement(y.a,{type:"question-circle-o",style:{color:"red"}}),okType:"danger",okText:"DELETE",onConfirm:function(r){e.deleteRelation(a,n,t.reference,l)}},r.a.createElement(y.a,{type:"close-circle",style:{color:"red"}}))}));a(677);function Ke(e){var t=e.item,a=e.objType,n=e.docId,l=e.fieldName;return r.a.createElement("div",{className:"polaroid container"},r.a.createElement("h4",null,r.a.createElement(p.b,{to:"/view/"+t.reference.path},t.name),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(Je,{item:t,objType:a,docId:n,fieldName:l})),r.a.createElement("p",null,t.relation))}var Xe=function(e){var t=e.title,a=e.items,n=e.objType,l=e.obj,o=e.docId,i=e.fieldName,c=function(e){return"Related People"===e?"usergroup-add":"Related Events"===e?"file-add":void 0},s=function(e){return"Related Artefacts"===e?r.a.createElement("h3",null,r.a.createElement(Me.a,{style:{display:"flex",alignItems:"center"}},e)):r.a.createElement("h3",null,r.a.createElement(Me.a,{style:{display:"flex",alignItems:"center"}},e,r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(We,{title:e,artefact:l,artefact_id:o,iconType:c(e)})))};return a&&0!==a.length?r.a.createElement(r.a.Fragment,null,s(t),a.map((function(e){return r.a.createElement(Ke,{key:e.name,item:e,fieldName:i,objType:n,docId:o})}))):r.a.createElement(r.a.Fragment,null,s(t),r.a.createElement("div",{className:"polaroid"},r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"Ooops, you can update ",t.toLowerCase()," by clicking the icon ",r.a.createElement(y.a,{type:c(t),style:{color:"DodgerBlue"}})," above. Your list shows up right here."))))},Ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleConfirm=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.deleteObj(a.props.objType,a.props.docId);case 2:a.props.hideModal();case 3:case"end":return e.stop()}}),e)}))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(_.a,{title:"DELETE",visible:this.props.visible,onOk:this.handleConfirm,onCancel:this.props.hideModal,okText:"Confirm",cancelText:"Cancel"},r.a.createElement("p",null,r.a.createElement(y.a,{type:"question-circle-o",style:{color:"red"}})," Are you sure you want to delete this?")))}}]),t}(r.a.Component),Qe=Object(h.d)(Object(f.b)(null,(function(e){return{deleteObj:function(t,a){return e(M(t,a))}}})))(Ze),$e=a(750),et=(a(678),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={carousel:r.a.createRef(),index:0},a.previous=function(){a.state.carousel.current.prev()},a.next=function(){a.state.carousel.current.next()},a.goTo=function(e){a.state.carousel.current.goTo(e)},a.handleChange=function(e,t){a.setState({index:t})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.carousel,n=t.index,l=this.props.media_links;return l?r.a.createElement("div",{className:"carousel-container"},r.a.createElement($e.a,{ref:a,dots:!1,beforeChange:this.handleChange},l.map((function(e,t){return r.a.createElement("div",{key:t,className:"carousel-image-container"},r.a.createElement("img",{alt:"Carousel",src:e.url}))}))),l.length>1?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(y.a,{type:"left-circle",style:{fontSize:"2rem",margin:"0 1rem"},onClick:this.previous}),l.map((function(t,a){return r.a.createElement("div",{key:a,style:{display:"inline-block",verticalAlign:"text-bottom",width:"2rem",height:"2rem",backgroundColor:a===n?"rgba(0,0,0,0.65)":"white",borderColor:"rgba(0,0,0,0.65)",borderRadius:"50%",borderStyle:a===n?"none":"solid",borderWidth:"0.18rem",cursor:"pointer",margin:"0 1rem"},onClick:function(){return e.goTo(a)}})})),r.a.createElement(y.a,{type:"right-circle",style:{fontSize:"2rem",margin:"0 1rem"},onClick:this.next})):null):null}}]),t}(r.a.Component));function tt(e){var t="image/jpeg"===e.type||"image/png"===e.type;if(t){var a=e.size/1024/1024<5;if(a)return t&&a;W.a.error("Image must smaller than 5MB!")}else W.a.error("You can only upload JPG/PNG file!")}var at=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1},a.handleChange=function(e){a.props.downloadURL?function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){return a.setState({loading:!1})})):a.setState({loading:!0})},a.handleUpload=function(e){var t=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t}(10)+e.name;a.props.uploadFile("image/"+a.props.auth.uid+"/"+t,e)},a.componentDidUpdate=function(){var e=a.props.downloadURL;console.log("url",e),a.props.returnUrl?a.props.returnUrl(e):console.log("URL generated but not used. Pass returnUrl function as prop")},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.downloadURL,t=r.a.createElement("div",null,r.a.createElement(y.a,{type:this.state.loading?"loading":"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return console.log(this.state),r.a.createElement(H.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:this.handleUpload,beforeUpload:tt,onChange:this.handleChange},e?r.a.createElement("img",{src:e,alt:"avatar",style:{width:"100%"}}):t)}}]),t}(n.Component),nt=Object(f.b)((function(e){return{auth:e.firebase.auth,downloadURL:e.objects.downloadURL}}),(function(e){return{uploadFile:function(t,a){return e(T(t,a))}}}))(at),rt=Y.a.TextArea,lt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={image_url:null},a.getImageUrl=function(e){a.setState({image_url:e}),console.log("image_url",e)},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n={details:t.details,media_links:a.state.image_url?[{date_created:Date.now(),url:a.state.image_url}]:[]};a.props.handleSubmit(n),a.props.form.resetFields()}}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(q.a,{onSubmit:this.handleSubmit},r.a.createElement(q.a.Item,{label:"Details"},e("details",{rules:[{required:!0,message:"Please enter some details!"}]})(r.a.createElement(rt,{placeholder:"What would you like to add about the story of this artefact?",autosize:{minRows:3}}))),r.a.createElement(q.a.Item,{label:"Photos"},r.a.createElement(nt,{returnUrl:this.getImageUrl})),r.a.createElement(q.a.Item,null,r.a.createElement(E.a,{type:"primary",ghost:!0,htmlType:"submit"},"Submit")))}}]),t}(r.a.Component),ot=lt=q.a.create({name:"addendumForm"})(lt),it=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,type:a.props.type,title:"create"===a.props.type?"Create an Addendum":"Edit Addendum",docId:a.props.docId?a.props.docId:null},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.reference=a.props.firestore.doc("Artefacts/"+a.props.artefact_id),console.log(e),console.log(a.props.docId),"create"===a.state.type?a.props.createObj(pe,e):a.props.editObj(pe,a.props.docId,e),a.setState({visible:!1})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,"create"===this.state.type?r.a.createElement(E.a,{type:"primary",shape:"circle",icon:"file-add",ghost:!0,onClick:this.showModal,size:"small"}):r.a.createElement(E.a,{size:"small",onClick:this.showModal},r.a.createElement(y.a,{type:"form"}),"Edit"),r.a.createElement(_.a,{visible:this.state.visible,onCancel:this.handleCancel,title:this.state.title,footer:[r.a.createElement(E.a,{key:"cancel",type:"default",onClick:this.handleCancel},"Cancel")]},r.a.createElement(ot,{handleSubmit:this.handleSubmit})))}}]),t}(n.Component),ct=Object(h.d)(Object(f.b)(null,(function(e){return{createObj:function(t,a){return e(F(t,a))},editObj:function(t,a,n){return e(x(t,a,n))}}})),Object(ne.firestoreConnect)())(it);a(690);var st=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.hideModal=function(){a.setState({visible:!1})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.document,t=e.created_by,a=e.date_created,n=e.details,l=e.media_links,o=e.reference,i=this.props.id;return r.a.createElement("div",{className:"polaroid"},r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,a.toDate().toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),r.a.createElement("p",{style:{color:"#1890ff"}},"By: ",t?xe(t):"unknown"),r.a.createElement("p",null,n),l&&l.length?r.a.createElement(et,{media_links:l}):null),r.a.createElement("div",{className:"addendum-list left-align"},r.a.createElement(ct,{size:"small",docId:this.props.id,artefact_id:o.id,type:"edit"}),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(E.a,{onClick:this.showModal,size:"small"},r.a.createElement(y.a,{type:"delete"})," Delete"),r.a.createElement(Qe,{objType:"Addendums",docId:i,visible:this.state.visible,showModal:this.showModal,hideModal:this.hideModal})))}}]),t}(r.a.Component);var ut=function(e){function t(){var e,a,n;Object(i.a)(this,t);for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={path:(n=a.props.id,"Artefacts/"+n)},a.handleDelete=function(e){a.props.deleteObj(pe,e)},a.header=function(e){return r.a.createElement("h3",null,r.a.createElement(Me.a,{style:{display:"flex",alignItems:"center"}},e,r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(ct,{artefact_id:a.props.id,type:"create"})))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"generateList",value:function(e){var t=this;return e.map((function(e){return r.a.createElement(st,{key:e[0],id:e[0],document:e[1],delete:t.handleDelete})}))}},{key:"getAddendums",value:function(e){var t=this;return Object.keys(e).map((function(t){return[t,e[t]]})).filter((function(e){return e[1]&&e[1].reference.path===t.state.path}))}},{key:"render",value:function(){var e=this.props.addendums,t=[];return e&&(t=this.getAddendums(e)),r.a.createElement("div",null,this.header("Addendums"),0===t.length?r.a.createElement("p",null,"Press add an addendum button to create addendums"):this.generateList(t))}}]),t}(n.Component),mt=Object(h.d)(Object(f.b)((function(e){return{addendums:e.firestore.data.Addendums}}),(function(e){return{deleteObj:function(t,a){return e(M(t,a))}}})),Object(ne.firestoreConnect)((function(e){return[{collection:pe,orderBy:["date_created"]}]})))(ut),dt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleConfirm=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.deleteObj(a.props.objType,a.props.docId);case 2:a.setState({visible:!0}),a.props.history.push("/feed");case 4:case"end":return e.stop()}}),e)}))),a.hideModal=function(){a.setState({visible:!1})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a,{type:"danger",onClick:this.showModal,ghost:!0,size:"small"},r.a.createElement(y.a,{type:"delete"})," Delete"),r.a.createElement(_.a,{title:"You are about to Delete something!",visible:this.state.visible,onOk:this.handleConfirm,onCancel:this.hideModal,okText:"Confirm",cancelText:"Cancel"},r.a.createElement("p",null,r.a.createElement(y.a,{type:"question-circle-o",style:{color:"red"}})," Are you sure you want to delete this? This cannot be undone.")))}}]),t}(r.a.Component),pt=Object(h.d)(Object(f.b)(null,(function(e){return{deleteObj:function(t,a){return e(M(t,a))}}})))(dt),ft=a(763),ht=(a(278),Object(h.d)(Object(f.b)((function(e){return{artefact:e.firestore.data.Artefacts}}),null),Object(ne.firestoreConnect)((function(e){return[{collection:"Artefacts",doc:e.match.params.id}]})))((function(e){var t=e.artefact,a=e.match.params.id;return t?t&&!t[a]?r.a.createElement("div",{className:"object-content"},r.a.createElement("h2",null,"Artefact is NOT FOUND")):r.a.createElement("div",null,r.a.createElement(le.a,{onBack:function(){return window.history.back()},title:t[a].name},r.a.createElement(ft.a,{size:"small",column:2},r.a.createElement(ft.a.Item,{label:"Created by"},t[a].created_by),r.a.createElement(ft.a.Item,{label:"Created at"},Ve()(t[a].date_created.toDate()).format("LL")),t[a].last_modified?r.a.createElement(ft.a.Item,{label:"Last Modified"},Ve()(t[a].last_modified.toDate()).calendar()):null)),r.a.createElement(et,{media_links:t[a].media_links}),r.a.createElement("div",{className:"object-content"},r.a.createElement("p",null,t[a].description),r.a.createElement(Me.a,{className:"contentLink",style:{display:"flex",alignItems:"center"}},r.a.createElement(Ue,{docId:a}),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(pt,{docId:a,objType:ue,history:e.history})),r.a.createElement("div",{className:"List"},r.a.createElement(mt,{id:a}),r.a.createElement(Xe,{key:"related people",title:"Related People",fieldName:"people_links",items:t[a].people_links,objType:ue,obj:t,docId:a}),r.a.createElement(Xe,{key:"related events",title:"Related Events",fieldName:"events_links",items:t[a].events_links,objType:ue,docId:a})))):r.a.createElement("div",{className:"object-content"},r.a.createElement(re.a,{tip:"Loading...",size:"large"}))}))),bt=Object(h.d)(Object(f.b)((function(e){return{event:e.firestore.data.Events}})),Object(ne.firestoreConnect)((function(e){return[{collection:"Events",doc:e.match.params.id}]})))((function(e){var t=e.event,a=e.match.params.id;return t?t&&!t[a]?r.a.createElement("div",{className:"object-content"},r.a.createElement("h2",null,"Event is NOT FOUND")):r.a.createElement("div",null,r.a.createElement(le.a,{onBack:function(){return window.history.back()},title:t[a].name,subTitle:"Occured on: "+t[a].date.toDate().toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},r.a.createElement(ft.a,{size:"small",column:2},r.a.createElement(ft.a.Item,{label:"Created by"},t[a].created_by),r.a.createElement(ft.a.Item,{label:"Created at"},Ve()(t[a].date_created.toDate()).format("LL")),t[a].last_modified?r.a.createElement(ft.a.Item,{label:"Last Modified"},Ve()(t[a].last_modified.toDate()).calendar()):null)),r.a.createElement("div",{className:"object-content"},r.a.createElement("p",null,t[a].details),r.a.createElement(Xe,{title:"Related Artefacts",fieldName:"artefacts_links",objType:me,items:t[a].artefacts_links,docId:a}))):r.a.createElement("div",{className:"object-content"},r.a.createElement(re.a,{tip:"Loading...",size:"large"}))})),Et=Object(h.d)(Object(f.b)((function(e){return{person:e.firestore.data.People}})),Object(ne.firestoreConnect)((function(e){return[{collection:"People",doc:e.match.params.id}]})))((function(e){var t=e.person,a=e.match.params.id;return t?t&&!t[a]?r.a.createElement("div",{className:"object-content"},r.a.createElement("h2",null,"Person is NOT FOUND")):r.a.createElement("div",null,r.a.createElement(le.a,{onBack:function(){return window.history.back()},title:t[a].name+" "+t[a].lastname,subTitle:"Born: "+t[a].dob.toDate().toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},r.a.createElement(ft.a,{size:"small",column:2},r.a.createElement(ft.a.Item,{label:"Created by"},t[a].created_by),r.a.createElement(ft.a.Item,{label:"Created at"},Ve()(t[a].date_created.toDate()).format("LL")),t[a].last_modified?r.a.createElement(ft.a.Item,{label:"Last Modified"},Ve()(t[a].last_modified.toDate()).calendar()):null)),r.a.createElement("div",{className:"object-content"},r.a.createElement("p",null,t[a].details),r.a.createElement(Xe,{title:"Related Artefacts",fieldName:"artefacts_links",items:t[a].artefacts_links,objType:de,docId:a}))):r.a.createElement("div",{className:"object-content"},r.a.createElement(re.a,{tip:"Loading...",size:"large"}))})),yt=a(753),vt=a(762),gt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(v.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signIn(a.state)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authError;return t.uid?r.a.createElement(d.a,{to:"/"}):r.a.createElement(yt.a,{onSubmit:this.handleSubmit},r.a.createElement(yt.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",placeholder:"email",id:"email",onChange:this.handleChange})),r.a.createElement(yt.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",placeholder:"password",id:"password",onChange:this.handleChange})),r.a.createElement(vt.a,{type:"submit"},"Log In"),r.a.createElement("div",{className:"center red-text"},a?r.a.createElement("p",null,a):null))}}]),t}(n.Component),Ot=Object(f.b)((function(e){return{authError:e.user.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((a=t,function(e,t,n){n.auth.signInWithEmailAndPassword(a.email,a.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",err:t})}))}));var a}}}))(gt),jt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",name:"",lastName:"",submission:{email:""}},a.handleChange=function(e){a.setState(Object(v.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n={email:t.email,password:t.password,name:t.name,lastName:t.lastName};a.props.signUp(n),a.setState({submission:n})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.submission,t=this.props.auth;return e&&e.email&&e.email===t.email?r.a.createElement(d.a,{to:"/"}):r.a.createElement(yt.a,{onSubmit:this.handleSubmit},r.a.createElement(yt.a.Field,null,r.a.createElement("label",null,"First Name"),r.a.createElement("input",{type:"text",placeholder:"First Name",id:"name",onChange:this.handleChange})),r.a.createElement(yt.a.Field,null,r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{type:"text",placeholder:"Last Name",id:"lastName",onChange:this.handleChange})),r.a.createElement(yt.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",placeholder:"email",id:"email",onChange:this.handleChange})),r.a.createElement(yt.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",placeholder:"password",id:"password",onChange:this.handleChange})),r.a.createElement(vt.a,{type:"submit"},"Submit"))}}]),t}(n.Component),wt=Object(f.b)((function(e){return{auth:e.firebase.auth,authError:e.user.authError}}),(function(e){return{signUp:function(t){return e((a=t,function(e,t,n){var r=n.auth,l=n.firestore;r.createUserWithEmailAndPassword(a.email,a.password).then((function(e){return delete a.password,a.photoURL="https://firebasestorage.googleapis.com/v0/b/testing-e1ec1.appspot.com/o/No%20profile%20photo.png?alt=media&token=23fa70a3-c8a7-409d-bd73-0d38ed8772d6",l.collection("users").doc(e.user.uid).set(a).then((function(){r.currentUser.updateProfile({displayName:a.name})})).catch((function(e){console.log("Set up user profile ERROR")}))})).then((function(){e({type:"SIGNUP_SUCCESS"})})).catch((function(t){e({type:"SIGNUP_ERROR",err:t})}))}));var a}}}))(jt),kt=function(e){function t(e,a){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e,a))).remove_width_constraint_handler=function(){n.setState({width:"100%"})},n.reset_width_constraint_handler=function(){n.setState({width:"65%"})},n.HomeRoutes=function(){return n.props.auth.uid?r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0,render:function(e){return r.a.createElement(Ge,Object.assign({onMount:n.remove_width_constraint_handler,unMount:n.reset_width_constraint_handler},e))}}),r.a.createElement(d.b,{path:"/feed",component:Fe}),r.a.createElement(d.b,{path:"/view/artefacts/:id",component:ht}),r.a.createElement(d.b,{path:"/view/events/:id",component:bt}),r.a.createElement(d.b,{path:"/view/people/:id",component:Et}),r.a.createElement(d.b,{path:"/signup",component:wt}),r.a.createElement(d.b,{path:"/upload",component:X}),r.a.createElement(d.b,{render:function(){return r.a.createElement(d.a,{to:"/"})}})):r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0,render:function(e){return r.a.createElement(Ge,Object.assign({onMount:n.remove_width_constraint_handler,unMount:n.reset_width_constraint_handler},e))}}),r.a.createElement(d.b,{path:"/signin",component:Ot}),r.a.createElement(d.b,{render:function(){return r.a.createElement(d.a,{to:"/"})}}))},n.state={width:"65%"},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(te,null),r.a.createElement("div",{className:"App",style:{width:this.state.width}},r.a.createElement(this.HomeRoutes,null)))}}]),t}(r.a.Component),Ct=Object(h.d)(Object(f.b)((function(e){return{auth:e.firebase.auth}})))(kt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var St=a(405),_t=a(223),Rt=a(406),It=a.n(Rt);function Pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Nt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pt(a,!0).forEach((function(t){Object(v.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var At={isLoading:!0,errMess:null},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_SUCCESS":return console.log("create success"),Nt({},e,{doc:t.doc});case"CREATE_ERROR":return console.log("create error"),Nt({},e,{errMess:"Create failed"});case"EDIT_SUCCESS":return console.log("edit success"),e;case"EDIT_ERROR":return console.log("edit error"),Nt({},e,{errMess:"Edit failed"});case"DELETE_SUCCESS":return console.log("delete success"),e;case"DELETE_ERROR":return console.log("delete error"),Nt({},e,{errMess:"Delete failed"});case"UPLOAD_SUCCESS":return console.log("upload success"),Nt({},e,{downloadURL:t.downloadURL});case"UPDATE_ERROR":return console.log("update error"),Nt({},e,{errMess:"update failed"});case"APPEND_SUCCESS":return console.log("append success"),e;case"APPEND_ERROR":return console.log("append error"),Nt({},e,{errMess:"Append failed"});default:return e}};function Ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ut(a,!0).forEach((function(t){Object(v.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ut(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ft={authError:null},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login error"),Lt({},e,{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Lt({},e,{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),Lt({},e,{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Lt({},e,{authError:t.err.message});case"PROFILE_UPDATE_SUCCESS":return console.log("profile update success"),Lt({},e,{authError:null});case"PROFILE_UPDATE_ERROR":return console.log("profile update error"),Lt({},e,{authError:"Profile update failed"});default:return e}},Mt=Object(h.c)({user:xt,objects:Dt,firestore:_t.firestoreReducer,firebase:ne.firebaseReducer}),Tt=Object(h.e)(Mt,Object(h.d)(Object(h.a)(St.a.withExtraArgument({auth:P,firestore:N,storageRef:A})),Object(ne.reactReduxFirebase)(D,{userProfile:"users",useFirestoreForProfile:!0,attachAuthIsReady:!0},It.a),Object(_t.reduxFirestore)(D)));Tt.firebaseAuthIsReady.then((function(){o.a.render(r.a.createElement(f.a,{store:Tt},r.a.createElement(Ct,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}))}},[[422,1,2]]]);
//# sourceMappingURL=main.db97b216.chunk.js.map